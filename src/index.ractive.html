<style>
	#javascript-editor { width: 500px; height: 500px;}
	.zzz {width: 500px; height: 500px;}
</style>

<div id='javascript-editor' class="{{class}}" style="{{style}}">{{value}}</div>

<script>
	import Ractive from 'ractive';


	//import * as ace from 'brace';
	//import 'brace/mode/javascript';
	//import 'brace/theme/monokai';

	//var Ace = require('ace-builds/src-min-noconflict/ace');
	//import { Ace } from "ace-builds/src-min-noconflict/ace";
	import 'ace-builds/src-min-noconflict/ace' // Load Ace Editor
	import 'ace-builds/src-min-noconflict/theme-monokai'
	import 'ace-builds/src-min-noconflict/mode-javascript'

	//import "ace-builds/webpack-resolver";


	//require("ace-builds/src-min-noconflict/mode-javascript")
	//var theme_monokai = require('ace-builds/src-min-noconflict/theme-monokai');



	export default Ractive.extend({
		template: $TEMPLATE,
		css: $CSS,
		on: {
			init: function() {

			},
			complete: function() {
				var ractive=this;
				var editor = ace.edit('javascript-editor', {
					mode: "ace/mode/javascript",
					theme: "ace/theme/monokai",
					//maxLines: 50,
					//minLines: 10,
					fontSize: 15
				})
				editor.getSession().setOption("useWorker", false);
				//editor.getSession().setMode('ace/mode/javascript');
				//editor.setTheme('ace/theme/monokai');
				//editor.resize();


				editor.getSession().on('change', function() {
					ractive.set({value: editor.getSession().getValue()})
				});

				this.observe('value', function( n, o, kp ) {
					if (n !== editor.getSession().getValue()) {
						editor.setValue(n);
						editor.clearSelection();
					}
				})

			}
		}
	})
</script>
